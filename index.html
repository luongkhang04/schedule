<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xếp Lịch Học</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container py-5">
        <h1 class="text-center mb-5 text-success">Ứng Dụng Xếp Lịch Học</h1>

        <!-- Phần danh sách ca  -->
        <div class="card mb-4 shadow">
            <div class="card-body">
                <h3 class="card-title text-primary">Thêm Ca Học</h3>
                <div class="row g-3 align-items-end mb-3">
                    <div class="col-md-4">
                        <label for="day" class="form-label">Ngày:</label>
                        <select id="day" class="form-select">
                            <option value="Thứ Hai">Thứ Hai</option>
                            <option value="Thứ Ba">Thứ Ba</option>
                            <option value="Thứ Tư">Thứ Tư</option>
                            <option value="Thứ Năm">Thứ Năm</option>
                            <option value="Thứ Sáu">Thứ Sáu</option>
                            <option value="Thứ Bảy">Thứ Bảy</option>
                            <option value="Chủ Nhật">Chủ Nhật</option>
                        </select>
                    </div>
                    <div class="col-md-3">
                        <label for="start-time" class="form-label">Bắt đầu:</label>
                        <input type="time" id="start-time" class="form-control">
                    </div>
                    <div class="col-md-3">
                        <label for="end-time" class="form-label">Kết thúc:</label>
                        <input type="time" id="end-time" class="form-control">
                    </div>
                    <div class="col-md-2">
                        <button id="add-slot" class="btn btn-primary w-100 mt-4" onclick="addSlot()">Thêm Ca</button>
                    </div>
                </div>
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr class="table-primary">
                                <th>Ngày</th>
                                <th>Bắt đầu</th>
                                <th>Kết thúc</th>
                                <th>Hành động</th>
                            </tr>
                        </thead>
                        <tbody id="slot-table-body" style="--bs-table-bg: rgb(207 226 255 / 20%);--bs-table-hover-bg: rgb(207 226 255 / 30%);"></tbody>
                    </table>
                </div>
                <!-- Phần hiển thị tổng thời gian có thể học -->
                <div class="card-footer text-center">
                    <strong>Tổng thời gian có thể học: </strong><span id="total-study-time">0</span> giờ/tuần
                </div>
            </div>
        </div>

        <!-- Phần danh sách môn học -->
        <div class="card mb-4 shadow">
            <div class="card-body">
                <h3 class="card-title text-warning">Thêm Môn Học</h3>
                <div class="row g-3 align-items-end mb-3">
                    <div class="col-md-6">
                        <label for="subject-name" class="form-label">Tên môn học:</label>
                        <input type="text" id="subject-name" class="form-control" placeholder="Ví dụ: Toán">
                    </div>
                    <div class="col-md-4">
                        <label for="hours-needed" class="form-label">Số giờ cần học:</label>
                        <input type="number" id="hours-needed" class="form-control" min="1" placeholder="Ví dụ: 3">
                    </div>
                    <div class="col-md-2">
                        <button id="add-subject" class="btn btn-warning w-100 mt-4" onclick="addSubject()">Thêm Môn</button>
                    </div>
                </div>
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr class="table-warning">
                                <th>Môn học</th>
                                <th>Số giờ cần học</th>
                                <th>Số giờ đã xếp</th>
                                <th>Hành động</th>
                            </tr>
                        </thead>
                        <tbody id="subject-table-body" style="--bs-table-bg: rgb(255 243 205 / 20%);--bs-table-hover-bg: rgb(255 243 205 / 30%);"></tbody>
                    </table>
                </div>
                <div class="card-footer text-center">
                    <strong>Tổng thời gian cần học: </strong><span id="totalTimeNeeded">0</span> giờ/tuần<br>
                    <strong>Tổng thời gian đã xếp: </strong><span id="totalTimeScheduled">0</span> giờ/tuần
                </div>
            </div>
        </div>

        <!-- Phần xếp lịch -->
        <div class="card shadow">
            <div class="card-body">
                <h3 class="card-title text-danger">Lịch Học</h3>
                <div class="row g-3 align-items-end mb-3">
                    <div class="col-md-10">
                        <label for="sort" class="form-label">Cách sắp xếp các môn:</label>
                        <select id="sort" class="form-select">
                            <option value="optimal">Đảm bảo số giờ cần học</option>
                            <option value="random">Ngẫu nhiên</option>
                            <option value="greedy">Đan xen</option>
                            <option value="turn">Lần lượt</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <button id="generate-schedule" class="btn btn-danger w-100 mt-4" onclick="generateSchedule()">Xếp Lịch</button>
                    </div>
                </div>
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr class="table-danger">
                                <th>Ngày</th>
                                <th>Môn học</th>
                                <th>Bắt đầu</th>
                                <th>Kết thúc</th>
                                <th>Hành động</th>
                            </tr>
                        </thead>
                        <tbody id="schedule-table-body" style="--bs-table-bg: rgb(248 215 218 / 20%);--bs-table-hover-bg: rgb(248 215 218 / 30%);"></tbody>
                    </table>
                </div>
                <div class="text-center">
                    <button class="btn btn-success" onclick="exportScheduleToPDF()">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-download" viewBox="0 0 16 16"><path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"/><path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z"/></svg>
                        Xuất lịch ra PDF
                    </button>
                </div>
            </div>
        </div>
    </div>
    <footer class="pt-3 border-top">
        <p class="text-center text-body-secondary">© 2024 - Ứng dụng xếp lịch học. Xuất bản bởi Lương Thái Khang.</p>
    </footer>
    <!-- Script -->
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
    <script src="script.js"></script>
</body>
</html>